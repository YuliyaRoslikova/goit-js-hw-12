{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api'\n});\n\nconst API_KEY = '/?key=42320739-3511db631b1999bc59ca675c6';\n\nexport async function getImages(query, page, quantity) {\n  const PARAMS = `&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${quantity}`;\n\n  const url = API_KEY + PARAMS;\n\n  try {\n    const res = await instance.get(url);\n    return res.data;\n  } catch(err) {\n    throw new Error(err.message);\n  }\n}\n","export function getImagesMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img \n          class=\"gallery-img\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n        />\n        <div class=\"descriptions\">\n          <div class=\"img-descriptions\">\n            <p class=\"img-title\">Likes</p>\n            <p class=\"img-content\">${likes}</p>\n          </div>\n          <div class=\"img-description\">\n            <p class=\"img-title\">Views</p>\n            <p class=\"img-content\">${views}</p>\n          </div>\n          <div class=\"img-description\">\n            <p class=\"img-title\">Comments</p>\n            <p class=\"img-content\">${comments}</p>\n          </div>\n          <div class=\"img-description\">\n            <p class=\"img-title\">Downloads</p>\n            <p class=\"img-content\">${downloads}</p>\n          </div>\n        </div>\n      </a>\n    </li>`;\n      }\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImages } from './js/pixabay-api';\nimport { getImagesMarkup } from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst galleryItems = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('#loadMore');\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nlet searchQuery;\nlet page;\nlet maxPage;\nconst quantity = 15;\n\nform.addEventListener('submit', onFormSubmit);\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  galleryItems.innerHTML = '';\n  searchQuery = e.target.elements.query.value.trim();\n  page = 1;\n  hideLoadBtn();\n  showLoader();\n\n  if (searchQuery === '') {\n    showMessage('Fill out the search form!');\n    hideLoader();\n    return;\n  }\n\n  try {\n    const data = await getImages(searchQuery, page, quantity);\n    maxPage = Math.ceil(data.total / quantity);\n\n    if (data.totalHits === 0) {\n      showMessage('Sorry, there are no images matching your search query. Please try again!');\n    } else {\n      renderImages(data.hits);\n      checkBtnVisibleStatus();\n    }\n  } catch (err) {\n    showMessage(err.message);\n    maxPage = 0;\n    galleryItems.innerHTML = '';\n  }\n\n  hideLoader();\n  e.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  showLoader();\n  hideLoadBtn();\n  try {\n    const data = await getImages(searchQuery, page, quantity);\n    hideLoader();\n    checkBtnVisibleStatus();\n    renderImages(data.hits);\n    scroll();\n  } catch (err) {\n    showMessage(err.message);\n  }\n}\n\nfunction renderImages(images) {\n  const markup = getImagesMarkup(images);\n  galleryItems.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nfunction showLoadBtn() {\n  btnLoadMore.classList.remove('is-hidden');\n}\n\nfunction hideLoadBtn() {\n  btnLoadMore.classList.add('is-hidden');\n}\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hideLoadBtn();\n    showMessage(\"We're sorry, but you've reached the end of search results.\", {\n      backgroundColor: 'lightblue',\n      messageColor: 'black',\n    });\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction showMessage(message, options = {}) {\n  const iziToastOptions = {\n    backgroundColor: 'red',\n    messageColor: 'white',\n    messageSize: '14',\n    position: 'topRight',\n    timeout: 3000,\n  };\n\n  iziToast.show({\n    ...iziToastOptions,\n    ...options,\n    message,\n  });\n}\n\nfunction scroll(){\n  const imageRef = document.querySelector('li.gallery-item')\n  if (imageRef) {\n    const rect = imageRef.getBoundingClientRect()\n    window.scrollBy(0, rect.height * 2);\n  }\n}\n"],"names":["instance","axios","API_KEY","getImages","query","page","quantity","PARAMS","url","err","getImagesMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loader","galleryItems","btnLoadMore","gallery","SimpleLightbox","searchQuery","maxPage","onFormSubmit","onLoadMoreClick","hideLoadBtn","showLoader","showMessage","hideLoader","data","renderImages","checkBtnVisibleStatus","scroll","markup","showLoadBtn","message","options","iziToastOptions","iziToast","imageRef","rect"],"mappings":"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"}